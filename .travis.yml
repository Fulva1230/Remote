language: android
env:
  global:
    - ANDROID_API=28
    - ANDROID_BUILD_TOOLS=27.0.3
    - ADB_INSTALL_TIMEOUT=5
    - secure: HCui4/MGqIQCInfMd/B1RB90/NWmPttyv6lrVdgy4HOVgGNMoM4RQHWD42FEI+SDNQARvLGTJRLQhTsCNCIh8iUSEPG389fjjG3nsWpTaoHOpFZ28hHPnxkGdtQM4RoXZYfyKjElbv634CsvJ6WE2HNQnQ45x07dr1xUOYi+vJxZXnHziJvLaDV9Y0KmUjVVV3Kf2JdD/zsmcAHsD5WFc+/1elOwJfKTgKMQGlo0gKbk13S4VezMcR5oDAaFUwCGkVloGB977yza1I6sbH0GwNKmGPGxKHrNzpxFaQQmQhEo1piHzWQuBCwdS+UfUTWQSzw8xtKpbHMxz3EST6PtVTdWzr85R5JjaGqUu2r7tfgLfct8NzFYvPlDU9FoJYW9RhaAafxnwwZQw6+bSxPNBlBtjWa5kBxMsGOqKYmf+7kOea/x2IquoBOU3JTjjbvJUZJIsblSgkApuyQ5ze1ziQogPgSgyUHw4iJ0wOeWV6jI57KZdtdFPn0dX0dTTFIZtzBWiAI9TzGqkKzoZg8ETC8TsJmtBzoNal6pKR1dZQKDxLiHQW1/OkXdgbniUsadyTpPoBqLcu7T6wLConptS8TYzxITdOzTdFhynJ1ioZsLp8HrozPu/qV3nWOWMfBj+Sk1ExUBfps2y+8xiASC6OnR7z2XIuNZqpeVmuml2D4=
    - secure: H77ARoQcItLD8i8PGKSEMax+HaXtYPk48RaTuu/In1Jxx3r/gaweGVaAFrQHYi5fIV3PuSCE/8XMnAlZVLIODf98p3G+p4lUcZ758kbtYa4+XaQ1BmnJBooQMYGrL6WuGkUymgSPJPR/rtFMvy3C64CO5V9zh+lrUYyQD6FASW1Q3a6ygEOvfbH5wDembksUFjbbmOzBBrrnZats84w5Hi60xG8jY6J1KxCjzef4J1d6VKu57KMWsKiA40av68E1oyfkEVEpaG27MpzIECsPwqdvXptSNJ1t/ewUOCzN6iPtOgRL252vi9a8xP5obiEUY9OmQrrD8S6kiH0n7atLn7hJPApp+WuYJuB4o3l1oyIBkEhkSJBM5QEnMtlNpT/6dCnUVFua7/OpXTE8mCBde2dTz5DxYsfZ5XCs5K0cY1zRTtlYaNU684RgmcDwBLVabCwXcQVSdTmmEmR2MBe5eI2DiHpbbvCiOw6Eelp0g5LfK4Covr3MZ6SvjwYc0dsW0lglEJ2ZYGM2JWpnwZ1BsF7bYdN6zbA3+pzE7kX28hMx/nwifpS5rrK91+KquFadTdx+wyS1ZsBgMVkIOra02Ai9YXgdro48Y3qclVRS3xV0orEv77IscwE3mvsbZGQDpJHr25m9jRpQYdAq6qnUho927KIuxbFy8P7G/wybNXQ=
before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -rf $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
    - "$HOME/.gradle/caches/"
    - "$HOME/.gradle/wrapper/"
    - "$HOME/.android/build-cache"
android:
  components:
    - Build-Tools-27.0.3
    - android-28
script:
  - "./gradlew assembleRelease"
before_install:
  - openssl aes-256-cbc -K $encrypted_0bc9920312ca_key -iv $encrypted_0bc9920312ca_iv
    -in keystore.jks.enc -out keystore.jks -d
before_deploy:
  - cd app/build/outputs/apk/release
  - jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore ${TRAVIS_BUILD_DIR}/keystore.jks
    -storepass $storepass -keypass $keypass app-release-unsigned.apk key0
  - jarsigner -verify app-release-unsigned.apk
  - "${ANDROID_HOME}/build-tools/${ANDROID_BUILD_TOOLS}/zipalign -v 4 app-release-unsigned.apk
  TravisAndroid.apk"
  - cd -
deploy:
  provider: releases
  api_key: 52f269014a8e8498a3a2ab56bdbcfac29caf9ebd
  file_glob: true
  file: app/build/outputs/apk/release/*
  skip_cleanup: true
  on:
    tags: true
dd:
  secure: mJ64QbPOi/G24MA1v07Dro29l4GFFCX+gJQg1fPPFvrumbBjP14eE4ZMUIcQ8/fF2xrI1tUjwHc7ZdTDOBoDpFxJa4XuI6/TTamaWnEHSP3RJL9XMA6gZRj7NrpFd2wf6KMQNseAdyh9UMo7W6Xjd9EUbPdxDyF2en2ucwtCjqIuaX6/dvlhpalW1EG4roW0nPGXLaF3l61XgyZ77qlkBIkQ2hZyTS6lDu/e6leNJucUyPOc2xcURZavqsdoygHE4dLhA06DiGd26tnzx+Ux854qV7VyaJ0jKdOa5dNxUKPSgiI3Hk7SuR4jURE+SbAfYR6EfdIBuxwij54wNqJu9NXLW2sioTNSdFs5ANR3ehplN5vON0KwdUPNGqUklysvCcO5+M/kn642P6iCmQZKpOsWHRnf5/++I9+yIX2eODVySJID9YDgMenVJBzcEC8zg8rkQgDLc3ueVrSsV3FSi15U/hm/vPqOk7pkT0DrirnDsMZDj6CHPlSZiUNai8shhLbxghdSPwmwWsn4ZdcqBBFbtcY+Pva8VUk/+YM18zCknmD0ejP0ZVIU7jgFxuCjWgD+72059Eg8DSbce49q2rztWTwQEF9C3blNtEF7Z06eR6A7vlFOf6LNTFem2XfK/C1GmjnfrUERsomXN773dbjwddc5r1SAszT7cGYwskg=
